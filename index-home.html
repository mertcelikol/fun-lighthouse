<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
     <style>

      html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;  /* prevent scrolling inside iframe */
      width: 100vw;
      height: 100vh;
      box-sizing: border-box;

      
        font-family: Arial, sans-serif;
        max-width: 600px;
      }
      /* Optional: Make sure your main container uses 100% height and width */
      #uploadForm {
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      

      .file-input-wrapper {
        position: relative;
        height: 100px;
        background-color: #f0f0f0;
        border: 2px dashed #ccc;
        border-radius: 8px;
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        font-size: 14px;
        color: #555;
        transition: background-color 0.2s ease;
        padding: 10px;
      }

      .file-input-wrapper:hover,
      .file-input-wrapper.dragover {
        background-color: #e8f5e9;
      }

      .file-input {
        display: none;
      }

      .cloud-icon {
        width: 32px;
        height: 32px;
        margin-bottom: 6px;
        fill: #777;
      }

      #progressBar {
        width: 100%;
        background-color: #eee;
        border-radius: 4px;
        overflow: hidden;
        margin-top: 12px;
        height: 8px;
        display: none;
      }

      #progressFill {
        height: 100%;
        width: 0%;
        background-color: #4CAF50;
        transition: width 0.3s ease-in-out;
      }

      #output {
        margin-top: 10px;
        font-size: 13px;
        text-align: center;
        color: #333;
      }

      #thankYou {
      margin: 10px 0 10px 0;
      display: none; 
      background-color: #d4edda;
      color: #155724;
      padding: 10px;
      border: 1px solid #c3e6cb;
      border-radius: 4px;
       
    }
    </style>
  </head>
  <body>
    <div id="uploadForm" style="font-family: 'Poppins', sans-serif;  padding: 40px 20px; display: flex; justify-content: center; align-items: center; min-height: 100vh; box-sizing: border-box;">
     
      <div style="background: #fff; padding: 40px; border-radius: 12px; box-shadow: 0 8px 20px rgba(0,0,0,0.1); width: 100%; max-width: 700px;">
       
        <form id="registrationForm">
          <!-- Applying for -->
          <div style="font-weight: 500; padding: 12px 0; font-size: 1.2rem;">Applying For</div>
          
          <select id="appliedFor" name="appliedFor" style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px;">
            <option value="">-- Please choose an option --</option>
            <option value="boarding">Boarding School</option>
            <option value="online">Online School</option>
          </select>

          <!-- Student Info -->
          <div style="font-weight: 500; padding: 12px 0; font-size: 1.2rem;">Student</div>
          <div style="display: flex; gap: 40px; margin-bottom: 20px;">
            <div style="flex: 1;">
              <label for="studentFirstName">First Name</label>
              <input type="text" id="studentFirstName" name="studentFirstName"    style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px;" required>
            </div>
            <div style="flex: 1;">
              <label for="studentLastName">Last Name</label>
              <input type="text" id="studentLastName" name="studentLastName"    style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px;" required>
            </div>
          </div>
          <div style="display: flex; gap: 40px; margin-bottom: 20px;">
            <div style="flex: 1;">
              <label for="dob">Date of Birth</label>
              <input type="date" id="dob" name="dob"    style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px;" required>
            </div>
            <div style="flex: 1;">
              <label for="grade">Current Grade</label>
              <input type="text" id="grade" name="grade"    style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px;" required>
            </div>
          </div>
          <label for="address">Address</label>
          <textarea id="address" name="address" rows="2"    style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; margin-bottom: 20px;"></textarea>

          <label for="previousSchool">Previous School Name</label>
          <input type="text" id="previousSchool" name="previousSchool"    style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; margin-bottom: 20px;" required>

          <!-- File Upload -->
          <label>Report Card Upload</label>
          <div class="file-input-wrapper" id="fileInputWrapper">
            <input type="file" id="fileInput" class="file-input" accept=".pdf,.jpg,.jpeg,.png" required>
            
            <svg class="cloud-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path d="M19.35 10.04a7.49 7.49 0 0 0-14-2A6 6 0 0 0 6 20h13a5 5 0 0 0 .35-9.96zM12 13v4m0 0l-2-2m2 2l2-2"/>
            </svg>
            <span class="file-text">Click or drop a file here</span>
          </div>
          <small style="margin-top: 8px; display: block; color: #888;">Accepted file types: PDF, JPG, PNG (Max: 5MB)</small>

          <div id="progressBar"><div id="progressFill"></div></div>
          <p id="output"></p>

          <!-- Parent Info -->
          <div style="font-weight: 500; padding: 12px 0; font-size: 1.2rem;">Parent/Guardian</div>
          <div style="display: flex; gap: 40px; margin-bottom: 20px;">
            <div style="flex: 1;">
              <label for="parentFirstName">First Name</label>
              <input type="text" id="parentFirstName" name="parentFirstName"    style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px;" required>
            </div>
            <div style="flex: 1;">
              <label for="parentLastName">Last Name</label>
              <input type="text" id="parentLastName" name="parentLastName"    style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px;" required>
            </div>
          </div>
          <div style="display: flex; gap: 40px; margin-bottom: 20px;">
            <div style="flex: 1;">
              <label for="parentPhone">Phone</label>
              <input type="tel" id="parentPhone" name="parentPhone"    style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px;" required>
            </div>
            <div style="flex: 1;">
              <label for="parentEmail">Email</label>
              <input type="email" id="parentEmail" name="parentEmail"    style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px;" required>
            </div>
          </div>
          <div style="display: flex; gap: 20px; margin-bottom: 20px;">
            <div style="flex: 1;">
              <label for="contactMethod">Preferred Contact</label>
              <select id="contactMethod" name="contactMethod"    style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; " required>
                <option value="">Select</option>
                <option value="Phone">Phone</option>
                <option value="Email">Email</option>
                <option value="Text">Text Message</option>
              </select>
            </div>
            <div style="flex: 1;">
              <label for="callTime">Preferred Call Time</label>
              <input type="text" id="callTime" name="callTime"    placeholder="e.g. 10am - 12pm" style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px;" required>
            </div>
          </div>
          <label for="referralSource">Where did you hear about us?</label>
          <input type="text" id="referralSource" name="referralSource"    style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; margin-bottom: 25px;" required>
          <div id="thankYou">Thank you for submitting!</div>
          <input type="submit" value="Apply" style="background: #007bff; color: white; border: none; padding: 14px; border-radius: 6px; font-size: 16px; cursor: pointer; width: 100%;" required>
        </form>
      </div>
      
    <script>
      const fileInputWrapper = document.getElementById("fileInputWrapper");
      const fileInput = document.getElementById("fileInput");
      const fileText = fileInputWrapper.querySelector(".file-text");
      const progressBar = document.getElementById("progressBar");
      const progressFill = document.getElementById("progressFill");
      const output = document.getElementById("output");

      fileInputWrapper.addEventListener("click", () => fileInput.click());
      fileInputWrapper.addEventListener("dragover", (e) => {
        e.preventDefault();
        fileInputWrapper.classList.add("dragover");
      });
      fileInputWrapper.addEventListener("dragleave", () => {
        fileInputWrapper.classList.remove("dragover");
      });
      fileInputWrapper.addEventListener("drop", (e) => {
        e.preventDefault();
        fileInputWrapper.classList.remove("dragover");
        const file = e.dataTransfer.files[0];
        if (file) {
          fileInput.files = e.dataTransfer.files;
          fileText.textContent = file.name;
        }
      });
      fileInput.addEventListener("change", () => {
        const file = fileInput.files[0];
        if (file) {
          fileText.textContent = file.name;
        }
      });


      document.getElementById("registrationForm").addEventListener("submit", function(e) {
        e.preventDefault();
        const form = e.target;
        const submitButton = form.querySelector('input[type="submit"]');
        submitButton.disabled = true;  // Disable the submit button to prevent multiple clicks
        
        const file = fileInput.files[0];
        if (file) {
          if (file.size > 5 * 1024 * 1024) {
            output.innerText = "File too large (max 5MB).";
            submitButton.disabled = false;
            return;
          }
          const allowedTypes = ["application/pdf", "image/jpeg", "image/png", "image/jpg",];
          if (!allowedTypes.includes(file.type)) {
            output.innerText = "Invalid file type.";
            submitButton.disabled = false;
            return;
          } }

        if (file) {
          const reader = new FileReader();
          reader.onload = function() {
            progressBar.style.display = "block";
            output.innerText = "Uploading file...";

            // Simulated progress animation
            let width = 0;
            progressFill.style.width = "0%";
            const interval = setInterval(() => {
              if (width >= 90) {
                clearInterval(interval);
              } else {
                width += 1;
                progressFill.style.width = width + "%";
              }
            }, 30);

           

            const fileData = reader.result;
            output.innerText = "Uploading file...";
            
            fetch("https://script.google.com/macros/s/AKfycbw0DBUPg48lWO6X5RVnD1xLLJIewsZJt3qv3eMiV-3BcIHsDhnnSF_BCvJ26Oo_JCUY8A/exec", {
              method: "POST",
              headers: {
                "Content-Type": "application/x-www-form-urlencoded"
              },
              body: new URLSearchParams({
                appliedFor: form.appliedFor.value,
                studentFirstName: form.studentFirstName.value,
                studentLastName: form.studentLastName.value,
                dob: form.dob.value,
                grade: form.grade.value,
                address: form.address.value,
                previousSchool: form.previousSchool.value,
                parentFirstName: form.parentFirstName.value,
                parentLastName: form.parentLastName.value,
                parentPhone: form.parentPhone.value,
                parentEmail: form.parentEmail.value,
                contactMethod: form.contactMethod.value,
                callTime: form.callTime.value,
                referralSource: form.referralSource.value,
                fileName: file?.name,
                fileData: fileData || null
              }), 
            })
            .then(res => res.text())
            .then(response => {
              
              document.getElementById('thankYou').style.display = 'block';
              form.reset();
              fileText.textContent = "Click or drop a file here";
              progressBar.style.display = "none";
              submitButton.disabled = false;
            })
            .catch(err => {
              output.innerText = "Error: " + err;
              submitButton.disabled = false;
            });
          };
          reader.readAsDataURL(file);
        } else {
          output.innerText = "No file uploaded.";
          form.reset();
          submitButton.disabled = false;   
        }
      });
    </script>
    </div>

  </body>
</html>

   
